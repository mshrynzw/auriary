# auriary — 要件定義書 (Requirements Definition Document / SRS)

## 1. 文書情報

- 文書名：auriary 要件定義書
- バージョン：1.0.0
- 作成日：2025-XX-XX
- 作成者：mshr ynzw
- 対象システム：AI連携型日記アプリ「auriary」

---

## 2. 目的

本書は、日記アプリ「auriary」に求められる機能要件・非機能要件・制約条件を明確にし、  
開発・保守・運用における共通理解を形成することを目的とする。

auriary は「AI を活用し、日々の記録を簡単・美しく・安全に残す」ことをコンセプトとする。

---

## 3. システム概要

### 3.1 システム名称
- 日本語：auriary（オーリアリー）
- 英語：auriary — AI Diary App

### 3.2 システムの特徴
- ChatGPT とリアルタイム連携
- 自動文章補完
- 感情分析・トピック抽出
- タグ自動生成
- クラウド同期（Supabase）
- ブラウザ/スマホ対応

---

## 4. 利用者

### 4.1 主なユーザー
- 日々の日記を書きたい個人ユーザー
- AI の助けを借りて文章を作りたい人
- メンタルや気分の推移を可視化したい人
- 複数デバイスで日記を管理したい人

---

## 5. 想定利用シナリオ

1. ユーザーがログイン
2. 日記を書く（自由入力）
3. AIが文章を整形し、読める文章へ補完
4. AIがセマンティック解析を行い、
   - 感情スコア付与
   - トピック抽出
   - タグ生成
   - 要約生成
5. カレンダー画面で日別・週別・月別に閲覧
6. 分析画面で感情・トピックの推移を確認

---

## 6. 機能要件（Functional Requirements）

### 6.1 認証
- [FR-01] ユーザーはメールアドレスで登録できる
- [FR-02] Supabase Auth を用いて安全にログインできる
- [FR-03] ソーシャルログイン（Google等）を追加可能な構造にする

### 6.2 日記管理
- [FR-10] 日記を作成/編集/削除できる
- [FR-11] 日記本文はリッチテキスト編集（TipTap）
- [FR-12] 日記データは Supabase でユーザーごとに RLS 制御される
- [FR-13] 過去の日記を日付で検索できる

### 6.3 AI連携
- [FR-20] AI 文章補完ボタンを用意
- [FR-21] AI による以下の自動生成がおこなえる
  - 要約(summary)
  - 感情分析(mood score)
  - トピック抽出(topic list)
  - 自動タグ生成(tag list)
- [FR-22] AI 利用ログを保存する（オプション）

### 6.4 カレンダー
- [FR-30] 月・週・日ビューで日記を閲覧できる
- [FR-31] 感情スコアを視覚的に表示する
- [FR-32] 条件フィルター（期間 / タグ / 感情）に対応する

### 6.5 分析機能
- [FR-40] 過去 n 日間の感情推移をグラフ化する
- [FR-41] トピックの頻度を可視化する
- [FR-42] AI が生成したサマリーを一覧で表示する

### 6.6 設定
- [FR-50] プロフィール編集
- [FR-51] テーマ切替（ライト/ダーク/オーロラテーマ）
- [FR-52] データ削除（退会処理）

### 6.7 通知機能（将来実装）
- [FR-60] プッシュ通知（Web Push API）を受信できる
- [FR-61] アプリ内通知を一覧表示できる
- [FR-62] 通知を既読に更新できる
- [FR-63] 通知設定（プッシュ/メールのON/OFF、通知種別ごとの設定）を変更できる
- [FR-64] 日記リマインダー（設定した時間に通知）を受け取れる
- [FR-65] 日記未記入リマインダー（N日連続で日記未記入の場合）を受け取れる
- [FR-66] AI分析完了通知を受け取れる
- [FR-67] 週次サマリーメール（過去1週間の日記サマリー）を受け取れる

---

## 7. 非機能要件（Non-Functional Requirements）

### 7.1 パフォーマンス
- [NFR-01] 主要画面は 2 秒以内に表示
- [NFR-02] AI レスポンスは 10 秒以内を目標

### 7.2 セキュリティ
- [NFR-10] Supabase RLS により、他ユーザーの日記にアクセスできない
- [NFR-11] OWASP Top 10 相当に対策済み
- [NFR-12] API キーは .env に保存し公開しない

### 7.3 可用性
- [NFR-20] Cloudflare Pages で 99.9% 稼働を目指す
- [NFR-21] サーバレス構成とし、障害復旧時間を最小化

### 7.4 保守性
- [NFR-30] Next.js 16 の App Router / Server Components を採用
- [NFR-31] コード整形は ESLint + Prettier
- [NFR-32] shadcn/ui のコンポーネントガイドラインに準拠

---

## 8. データ要件

### 8.1 主なデータ項目
- ユーザー情報
- 日記（本文、感情スコア、トピック、タグ、要約）
- AIログ
- カテゴリ・タグ

### 8.2 保存期間
- ユーザー削除後に関連データは論理削除

---

## 9. 制約条件

- ホスティング：Cloudflare Pages
- データベース：Supabase（PostgreSQL）
- 言語：TypeScript / React（Next.js）
- UI：Tailwind CSS v4 + shadcn/ui

---

## 10. リスク

- AI API の費用変動
- 大量データでの保存コスト増
- 個人情報の扱い（認証・日記内容）

---

## 11. 受入基準（Acceptance Criteria）

- 全機能要件が動作し、日記作成〜閲覧〜分析が行えること
- 他ユーザーのデータが閲覧できないこと
- AI 連携が期待通りに動作すること
- UI が主要デバイス（PC / スマホ）で正常に表示されること

---

## 12. 付録

- ER図
- テーブル定義書へのリンク
- API 仕様書へのリンク（作成予定）

