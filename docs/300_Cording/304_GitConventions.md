# Git コミット規約

## Git コミット規約

本ドキュメントは、auriary プロジェクトにおける Git コミット規約を定めたものです。

---

## コミットメッセージ形式

### Conventional Commits の採用

[Conventional Commits](https://www.conventionalcommits.org/) の規約に従います。

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 基本形式

```
<type>: <subject>
```

**例:**
```
feat: 日記作成機能を追加
fix: 日記一覧の表示バグを修正
docs: README を更新
```

---

## コミットタイプ

### 主要なタイプ

| タイプ | 説明 | 例 |
|--------|------|-----|
| `feat` | 新機能の追加 | `feat: 日記編集機能を追加` |
| `fix` | バグ修正 | `fix: 日記保存時のエラーを修正` |
| `docs` | ドキュメントの変更 | `docs: API仕様書を更新` |
| `style` | コードスタイルの変更（動作に影響なし） | `style: Prettierでフォーマット` |
| `refactor` | リファクタリング | `refactor: 日記取得処理を関数化` |
| `perf` | パフォーマンス改善 | `perf: 日記一覧の読み込み速度を改善` |
| `test` | テストの追加・修正 | `test: 日記作成のテストを追加` |
| `chore` | ビルドプロセスやツールの変更 | `chore: 依存関係を更新` |
| `ci` | CI/CD の設定変更 | `ci: GitHub Actions を設定` |

### タイプの選択基準

- **feat**: ユーザーに影響する新機能
- **fix**: バグ修正
- **refactor**: 機能変更なしのコード改善
- **perf**: パフォーマンス改善
- **style**: フォーマット、セミコロン追加など
- **test**: テストコードの追加・修正
- **docs**: ドキュメントのみの変更
- **chore**: 依存関係、設定ファイルの変更

---

## スコープ（オプション）

### スコープの例

- `feat(diary): 日記編集機能を追加`
- `fix(auth): ログインエラーを修正`
- `refactor(api): 日記取得APIをリファクタリング`

### スコープの選択

- 機能単位: `diary`, `auth`, `calendar`
- コンポーネント単位: `DiaryCard`, `UserProfile`
- モジュール単位: `api`, `components`, `lib`

---

## サブジェクト（必須）

### サブジェクトの書き方

- **現在形で記述**: "追加する" ではなく "追加"
- **最初の文字は小文字**: "Add" ではなく "add"
- **句読点は付けない**: 末尾に `.` は不要
- **50文字以内**: 簡潔に記述

```typescript
// ✅ Good
feat: 日記編集機能を追加
fix: 日記一覧の表示バグを修正
docs: README を更新

// ❌ Bad
feat: 日記編集機能を追加しました
fix: 日記一覧の表示バグを修正する
docs: README を更新.
```

---

## ボディ（オプション）

### ボディの書き方

- 変更の理由や背景を説明
- 72文字で改行
- 空行でタイトルと区切る

```
feat: 日記編集機能を追加

日記の編集機能を実装しました。
- 既存の日記を編集可能に
- リアルタイムで保存
- バリデーションを追加
```

---

## フッター（オプション）

### フッターの用途

- 破壊的変更の説明
- 関連するIssue番号

```
feat: 日記APIのレスポンス形式を変更

BREAKING CHANGE: 日記APIのレスポンス形式が変更されました。
以前の形式はサポートされていません。

Closes #123
```

---

## コミット例

### シンプルなコミット

```
feat: 日記作成機能を追加
```

### スコープ付きコミット

```
feat(diary): 日記編集機能を追加
```

### ボディ付きコミット

```
fix: 日記一覧の表示バグを修正

日記一覧で日付が正しく表示されない問題を修正しました。
日付フォーマット関数のバグが原因でした。
```

### 破壊的変更を含むコミット

```
feat(api): 日記APIのレスポンス形式を変更

BREAKING CHANGE: 日記APIのレスポンス形式が変更されました。
`diary` フィールドが `data` に変更されました。

Closes #456
```

---

## ブランチ命名規則

### ブランチ名の形式

```
<type>/<scope>-<subject>
```

### ブランチ名の例

- `feat/diary-edit` - 日記編集機能
- `fix/auth-login` - 認証ログインのバグ修正
- `refactor/api-diaries` - 日記APIのリファクタリング
- `docs/readme-update` - README更新

### ブランチタイプ

- `feat/` - 新機能
- `fix/` - バグ修正
- `refactor/` - リファクタリング
- `docs/` - ドキュメント
- `test/` - テスト
- `chore/` - その他

---

## プルリクエスト

### プルリクエストのタイトル

- コミットメッセージと同じ形式を使用
- 変更内容が分かるように記述

```
feat: 日記編集機能を追加
```

### プルリクエストの説明

- 変更内容の概要
- 変更理由
- 関連するIssue番号
- スクリーンショット（UI変更の場合）

```markdown
## 変更内容
日記編集機能を追加しました。

## 変更理由
ユーザーから日記を編集したいという要望があったため。

## 関連Issue
Closes #123

## スクリーンショット
[画像]
```

---

## コミットの粒度

### 適切な粒度

- **1つのコミット = 1つの変更**
- 関連する変更はまとめる
- 無関係な変更は分ける

```bash
# ✅ Good: 関連する変更をまとめる
feat: 日記編集機能を追加
- DiaryEditor コンポーネントを追加
- 日記更新APIを実装
- バリデーションを追加

# ❌ Bad: 無関係な変更をまとめる
feat: 日記編集機能とログイン画面のスタイルを変更
```

---

## コミット前のチェック

### コミット前の確認事項

1. **コードが動作するか確認**
   - ビルドエラーがないか
   - リンターエラーがないか

2. **不要なファイルが含まれていないか確認**
   - `.env.local` などの機密情報
   - 一時ファイル
   - ログファイル

3. **コミットメッセージが適切か確認**
   - 形式に従っているか
   - 内容が明確か

---

## ベストプラクティス

### 1. 頻繁にコミット

- 小さな変更でもコミット
- 機能単位でコミット

### 2. 意味のあるコミットメッセージ

- 何を変更したか明確に
- なぜ変更したか説明（必要に応じて）

### 3. レビューしやすいコミット

- 1つのコミットで完結
- 関連する変更をまとめる

---

**関連ドキュメント:**
- [コーディング規約（概要）](./301_CodingStandards.md)
- [コードレビュー方針](./309_CodeReview.md)

