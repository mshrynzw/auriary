# テスト運用ガイドライン：AI活用

## 10. AI（ChatGPT / Cursor）を活用したテスト自動生成方針

### 10.1 Cursor でのテスト生成

Cursor に以下の情報を提供してテストを自動生成：

1. **実装コード**: テスト対象のコード
2. **テスト戦略ドキュメント**: 本ドキュメントと各テスト戦略ドキュメント
3. **既存テスト例**: 類似する既存のテスト

### 10.2 プロンプト例

#### 単体テスト生成

```
以下の関数の単体テストを生成してください。

関数: src/lib/validators/diary.ts の createDiarySchema
要件:
- 正常系: 有効な日記データを検証
- 異常系: 無効な日記データでエラー
- エッジケース: 境界値のテスト

テスト戦略: docs/500_Unit_Test/500_Strategy.md を参照
既存テスト例: src/lib/validators/*.test.ts を参照
```

#### 結合テスト生成

```
以下のAPI Route Handlerの結合テストを生成してください。

API: src/app/api/diaries/route.ts の POST メソッド
要件:
- 正常系: 日記を作成できる
- 異常系: バリデーションエラー
- 認証: 未認証ユーザーはエラー

テスト戦略: docs/600_Integration_Test/600_Strategy.md を参照
既存テスト例: src/__tests__/integration/api/*.test.ts を参照
```

#### E2Eテスト生成

```
以下のユーザーフローのE2Eテストを生成してください。

フロー: ログイン → 日記作成 → カレンダー表示
要件:
- ログインできる
- 日記を作成できる
- カレンダーに日記が表示される

テスト戦略: docs/700_E2E_Test/700Strategy.md を参照
既存テスト例: e2e/**/*.spec.ts を参照
```

### 10.3 生成されたテストの確認

- テストが要件を満たしているか確認
- テストが実行可能か確認
- テストが適切なアサーションを使用しているか確認
- テストが既存のテストパターンに従っているか確認

### 10.4 Cursor への情報提供

Cursor がテストを生成する際に参照すべき情報：

1. **テスト戦略ドキュメント**
   - `docs/400_Test_Operation_Guideline/` 配下のドキュメント
   - `docs/500_Unit_Test/500_Strategy.md`
   - `docs/600_Integration_Test/600_Strategy.md`
   - `docs/700_E2E_Test/700Strategy.md`

2. **既存テスト例**
   - `src/**/*.test.ts` - 単体テスト
   - `src/__tests__/integration/**/*.test.ts` - 結合テスト
   - `e2e/**/*.spec.ts` - E2Eテスト

3. **実装コード**
   - テスト対象のコード
   - 関連する型定義
   - 依存関係

---

**関連ドキュメント:**
- [概要](./401_Overview.md)
- [単体テスト戦略](../500_Unit_Test/500_Strategy.md)
- [結合テスト戦略](../600_Integration_Test/600_Strategy.md)
- [E2Eテスト戦略](../700_E2E_Test/700Strategy.md)

